import React, { useState } from 'react';
import { Settings, ChevronRight, Star, MessageSquare, Heart, Bookmark, Users, TrendingUp, Gift, Award, Clock, FileText, HelpCircle, Bell, Shield, LogOut } from 'lucide-react';

const ProfilePage = () => {
  const [activeTab, setActiveTab] = useState('posts');

  // ç”¨æˆ·ä¿¡æ¯
  const userInfo = {
    avatar: 'ğŸ‘©',
    name: 'å°é›¨å¦ˆå¦ˆ',
    level: 'Lv5',
    levelName: 'èµ„æ·±å¦ˆå¦ˆ',
    babies: [
      { name: 'å°é›¨', age: '3ä¸ªæœˆ', gender: 'girl' }
    ],
    stats: {
      posts: 23,
      reviews: 45,
      followers: 234,
      following: 156,
      helpful: 1203
    },
    points: 2850,
    earnings: 128.5
  };

  // æˆå°±å¾½ç« 
  const badges = [
    { id: 1, name: 'é‡‘ç‰Œè¯„ä»·å‘˜', icon: 'ğŸ…', desc: 'å‘å¸ƒ100+è¯„ä»·' },
    { id: 2, name: 'çƒ­å¿ƒå®å¦ˆ', icon: 'â¤ï¸', desc: 'å›ç­”50+é—®é¢˜' },
    { id: 3, name: 'äººæ°”ç‹', icon: 'ğŸ‘‘', desc: 'ç²‰ä¸500+' }
  ];

  // æˆ‘çš„å†…å®¹
  const myContent = {
    posts: [
      {
        id: 1,
        type: 'å¥½ç‰©æ¨è',
        content: 'å¼ºçƒˆæ¨èè¿™æ¬¾è¾…é£Ÿç¢—ï¼é˜²æ‘”é˜²çƒ«ï¼Œå®å®è‡ªå·±ä¹Ÿèƒ½æ‹¿ç¨³...',
        image: 'ğŸ¥£',
        likes: 234,
        comments: 56,
        time: '2å¤©å‰'
      },
      {
        id: 2,
        type: 'ä½¿ç”¨å¿ƒå¾—',
        content: 'ç”¨äº†ä¸€ä¸ªæœˆçš„å¥¶ç“¶ï¼Œåˆ†äº«ä¸€ä¸‹çœŸå®æ„Ÿå—...',
        image: 'ğŸ¼',
        likes: 189,
        comments: 34,
        time: '5å¤©å‰'
      }
    ],
    reviews: [
      {
        id: 1,
        product: 'Comotomoå¥¶ç“¶',
        rating: 'recommend',
        summary: 'é˜²èƒ€æ°”æœ‰æ•ˆï¼Œå®å®æ¥å—åº¦é«˜',
        helpful: 234,
        time: '1å‘¨å‰'
      },
      {
        id: 2,
        product: 'babycareè¾…é£Ÿç¢—',
        rating: 'not-recommend',
        summary: 'å¸ç›˜ä¸ç‰¢ï¼Œå·²é—²ç½®',
        helpful: 156,
        time: '2å‘¨å‰'
      }
    ]
  };

  // å¿«æ·å…¥å£
  const quickActions = [
    { icon: Star, label: 'æˆ‘çš„è¯„ä»·', count: userInfo.stats.reviews, color: 'text-yellow-500', bg: 'bg-yellow-50' },
    { icon: FileText, label: 'æˆ‘çš„å¸–å­', count: userInfo.stats.posts, color: 'text-blue-500', bg: 'bg-blue-50' },
    { icon: Bookmark, label: 'æˆ‘çš„æ”¶è—', count: 89, color: 'text-purple-500', bg: 'bg-purple-50' },
    { icon: Clock, label: 'æµè§ˆå†å²', count: null, color: 'text-gray-500', bg: 'bg-gray-50' }
  ];

  // åŠŸèƒ½èœå•
  const menuItems = [
    {
      title: 'æˆ‘çš„èµ„äº§',
      items: [
        { icon: Gift, label: 'ç§¯åˆ†å•†åŸ', value: `${userInfo.points}ç§¯åˆ†`, color: 'text-orange-500' },
        { icon: TrendingUp, label: 'æˆ‘çš„æ”¶ç›Š', value: `Â¥${userInfo.earnings}`, color: 'text-green-500' }
      ]
    },
    {
      title: 'è´¦å·ç®¡ç†',
      items: [
        { icon: Users, label: 'å…³æ³¨ä¸ç²‰ä¸', value: `${userInfo.stats.followers}ç²‰ä¸`, color: 'text-blue-500' },
        { icon: Bell, label: 'æ¶ˆæ¯é€šçŸ¥', value: null, color: 'text-purple-500' },
        { icon: Shield, label: 'éšç§è®¾ç½®', value: null, color: 'text-gray-500' },
        { icon: Settings, label: 'è´¦å·è®¾ç½®', value: null, color: 'text-gray-500' }
      ]
    },
    {
      title: 'å¸®åŠ©ä¸åé¦ˆ',
      items: [
        { icon: HelpCircle, label: 'å¸®åŠ©ä¸­å¿ƒ', value: null, color: 'text-blue-500' },
        { icon: MessageSquare, label: 'æ„è§åé¦ˆ', value: null, color: 'text-green-500' }
      ]
    }
  ];

  const renderMyContent = () => (
    <div className="p-4">
      {/* Tabåˆ‡æ¢ */}
      <div className="flex gap-4 mb-4 border-b">
        <button
          onClick={() => setActiveTab('posts')}
          className={`pb-2 font-medium ${
            activeTab === 'posts'
              ? 'text-blue-600 border-b-2 border-blue-600'
              : 'text-gray-600'
          }`}
        >
          å¸–å­({userInfo.stats.posts})
        </button>
        <button
          onClick={() => setActiveTab('reviews')}
          className={`pb-2 font-medium ${
            activeTab === 'reviews'
              ? 'text-blue-600 border-b-2 border-blue-600'
              : 'text-gray-600'
          }`}
        >
          è¯„ä»·({userInfo.stats.reviews})
        </button>
      </div>

      {/* å†…å®¹åˆ—è¡¨ */}
      <div className="space-y-3">
        {activeTab === 'posts' && myContent.posts.map((post) => (
          <div key={post.id} className="bg-white rounded-xl p-4 border border-gray-200">
            <div className="flex items-start gap-3 mb-3">
              <div className="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-3xl">
                {post.image}
              </div>
              <div className="flex-1">
                <div className="text-xs text-blue-600 mb-1">{post.type}</div>
                <div className="text-sm text-gray-800 line-clamp-2">{post.content}</div>
              </div>
            </div>
            <div className="flex items-center justify-between text-xs text-gray-500">
              <div className="flex items-center gap-4">
                <span className="flex items-center gap-1">
                  <Heart className="w-3 h-3" />
                  {post.likes}
                </span>
                <span className="flex items-center gap-1">
                  <MessageSquare className="w-3 h-3" />
                  {post.comments}
                </span>
              </div>
              <span>{post.time}</span>
            </div>
          </div>
        ))}

        {activeTab === 'reviews' && myContent.reviews.map((review) => (
          <div key={review.id} className="bg-white rounded-xl p-4 border border-gray-200">
            <div className="flex items-center justify-between mb-2">
              <div className="font-medium text-sm text-gray-800">{review.product}</div>
              <div className={`text-xs px-2 py-1 rounded ${
                review.rating === 'recommend'
                  ? 'bg-green-100 text-green-700'
                  : 'bg-red-100 text-red-700'
              }`}>
                {review.rating === 'recommend' ? 'æ¨è' : 'ä¸æ¨è'}
              </div>
            </div>
            <div className="text-sm text-gray-600 mb-3">ğŸ’¬ {review.summary}</div>
            <div className="flex items-center justify-between text-xs text-gray-500">
              <span className="flex items-center gap-1">
                <Star className="w-3 h-3" />
                {review.helpful}äººè§‰å¾—æœ‰ç”¨
              </span>
              <span>{review.time}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  );

  return (
    <div className="max-w-md mx-auto bg-gray-50 min-h-screen flex flex-col">
      {/* é¡¶éƒ¨å¯¼èˆª */}
      <div className="bg-white px-4 py-3 flex items-center justify-between shadow-sm">
        <span className="font-semibold text-gray-800">ä¸ªäººä¸­å¿ƒ</span>
        <button>
          <Settings className="w-5 h-5 text-gray-600" />
        </button>
      </div>

      {/* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */}
      <div className="bg-gradient-to-r from-blue-500 to-purple-500 px-4 pt-6 pb-16">
        <div className="flex items-center gap-4 mb-4">
          <div className="text-6xl">{userInfo.avatar}</div>
          <div className="flex-1 text-white">
            <div className="flex items-center gap-2 mb-1">
              <span className="text-xl font-bold">{userInfo.name}</span>
              <span className="bg-white/30 text-xs px-2 py-0.5 rounded-full">
                {userInfo.level}
              </span>
            </div>
            <div className="text-sm opacity-90">{userInfo.levelName}</div>
          </div>
          <button className="text-white text-sm">
            ç¼–è¾‘ â†’
          </button>
        </div>

        {/* å®å®ä¿¡æ¯ */}
        <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
          <div className="flex items-center gap-2">
            <div className="text-2xl">ğŸ‘¶</div>
            <div className="text-white">
              <div className="font-semibold">{userInfo.babies[0].name}</div>
              <div className="text-xs opacity-90">{userInfo.babies[0].age}</div>
            </div>
            <button className="ml-auto text-white text-xs">
              ç®¡ç† â†’
            </button>
          </div>
        </div>
      </div>

      {/* æ•°æ®ç»Ÿè®¡å¡ç‰‡ */}
      <div className="px-4 -mt-12 mb-4">
        <div className="bg-white rounded-2xl p-4 shadow-lg">
          <div className="grid grid-cols-5 gap-2 text-center">
            <div>
              <div className="text-xl font-bold text-gray-800">{userInfo.stats.posts}</div>
              <div className="text-xs text-gray-600">å¸–å­</div>
            </div>
            <div>
              <div className="text-xl font-bold text-gray-800">{userInfo.stats.reviews}</div>
              <div className="text-xs text-gray-600">è¯„ä»·</div>
            </div>
            <div>
              <div className="text-xl font-bold text-gray-800">{userInfo.stats.followers}</div>
              <div className="text-xs text-gray-600">ç²‰ä¸</div>
            </div>
            <div>
              <div className="text-xl font-bold text-gray-800">{userInfo.stats.following}</div>
              <div className="text-xs text-gray-600">å…³æ³¨</div>
            </div>
            <div>
              <div className="text-xl font-bold text-orange-600">{userInfo.stats.helpful}</div>
              <div className="text-xs text-gray-600">è·èµ</div>
            </div>
          </div>
        </div>
      </div>

      {/* æˆå°±å¾½ç«  */}
      <div className="px-4 mb-4">
        <div className="flex items-center justify-between mb-3">
          <h3 className="font-bold text-gray-800">æˆ‘çš„æˆå°±</h3>
          <button className="text-blue-600 text-sm">
            æŸ¥çœ‹å…¨éƒ¨ â†’
          </button>
        </div>
        <div className="flex gap-3 overflow-x-auto pb-2">
          {badges.map((badge) => (
            <div key={badge.id} className="bg-white rounded-xl p-3 border border-gray-200 flex-shrink-0 w-28 text-center">
              <div className="text-3xl mb-1">{badge.icon}</div>
              <div className="text-xs font-semibold text-gray-800 mb-1">{badge.name}</div>
              <div className="text-xs text-gray-500">{badge.desc}</div>
            </div>
          ))}
        </div>
      </div>

      {/* å¿«æ·å…¥å£ */}
      <div className="px-4 mb-4">
        <div className="bg-white rounded-2xl p-4 shadow-sm">
          <div className="grid grid-cols-4 gap-4">
            {quickActions.map((action, idx) => (
              <button key={idx} className="flex flex-col items-center gap-2">
                <div className={`${action.bg} p-3 rounded-xl`}>
                  <action.icon className={`w-6 h-6 ${action.color}`} />
                </div>
                <div className="text-xs text-gray-700">{action.label}</div>
                {action.count !== null && (
                  <div className="text-xs text-gray-500">{action.count}</div>
                )}
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* åŠŸèƒ½èœå• */}
      <div className="px-4 pb-20">
        {menuItems.map((section, idx) => (
          <div key={idx} className="mb-4">
            <div className="text-sm text-gray-500 mb-2 px-2">{section.title}</div>
            <div className="bg-white rounded-2xl overflow-hidden shadow-sm">
              {section.items.map((item, itemIdx) => (
                <button
                  key={itemIdx}
                  className={`w-full flex items-center justify-between p-4 ${
                    itemIdx < section.items.length - 1 ? 'border-b border-gray-100' : ''
                  }`}
                >
                  <div className="flex items-center gap-3">
                    <item.icon className={`w-5 h-5 ${item.color}`} />
                    <span className="text-gray-800">{item.label}</span>
                  </div>
                  <div className="flex items-center gap-2">
                    {item.value && (
                      <span className="text-sm text-gray-600">{item.value}</span>
                    )}
                    <ChevronRight className="w-5 h-5 text-gray-400" />
                  </div>
                </button>
              ))}
            </div>
          </div>
        ))}

        {/* é€€å‡ºç™»å½• */}
        <button className="w-full bg-white rounded-2xl p-4 shadow-sm flex items-center justify-center gap-2 text-red-600">
          <LogOut className="w-5 h-5" />
          <span>é€€å‡ºç™»å½•</span>
        </button>
      </div>

      {/* åº•éƒ¨å¯¼èˆªå ä½ */}
      <div className="h-16"></div>
    </div>
  );
};

export default ProfilePage;
